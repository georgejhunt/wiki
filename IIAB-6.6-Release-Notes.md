### _**DRAFT**_

Internet-in-a-Box (IIAB) 6.6 incorporates an extensive amount of teacher feedback from [IIAB 6.5](https://github.com/iiab/iiab/wiki/IIAB-6.5-Release-Notes), and will be released in early September ([Wiki](http://wiki.iiab.io/6.6), [GitHub](https://github.com/iiab/iiab/milestone/3)) in service of DIY digital libraries everywhere.

FOCUS: Teachers’ + (field) Techs’ + Testers’ immediate needs (<a href=https://github.com/iiab/iiab/pull/840>checklist</a>).

CLARIF: Larger architectural improvements will be deferred to [IIAB 6.7](http://wiki.iiab.io/6.7) or [IIAB 7.0](https://github.com/iiab/iiab/milestone/5).

_TODAY: Consider installing a <a href=http://download.iiab.io/6.6>pre-release of IIAB 6.6</a> !_

### What's New?

* Experimental support for [Kolibri 0.10.2+](https://blog.learningequality.org/kolibri-v0-10-is-released-4e673398f116) ([background](https://blog.learningequality.org/startwithkolibri-58227e98dde), [changelog](https://github.com/learningequality/kolibri/blob/develop/CHANGELOG.rst)) which is similar to [KA Lite](https://learningequality.org/ka-lite/) but offers many more curriculum design tools beyond Khan Academy, to create, remix and refine offline content packs.  Runs in a Python Virtual Environment for safety:  [#841](https://github.com/iiab/iiab/issues/841#issuecomment-405767755)
* [Sugarizer 1.0.1](http://sugarizer.org) is a "kids construct" learning environment originally from One Laptop Per Child, with easy accounts for kids to save their work.  Sugarizer 1.x is a major change from earlier versions:  [#798](https://github.com/iiab/iiab/issues/798#issuecomment-405609004), [PR #888](https://github.com/iiab/iiab/pull/888#issuecomment-404370082), [#974](https://github.com/iiab/iiab/issues/974)
* [Calibre-Web](https://github.com/iiab/iiab/tree/master/roles/calibre-web#calibre-web-readme) is an E-Book Library like Calibre, but with a more modern web interface.  Teachers can upload and arrange e-books (at http://box/books) and it saves students the hassle of logging in &mdash; no password is required to read and download e-books!  Runs in a Python Virtual Environment for safety:  [#816](https://github.com/iiab/iiab/issues/816)
  * Those who want to stick with Calibre's original E-Book server (now upgraded to version [3.30+](https://calibre-ebook.com/whats-new)) can do so.  Calibre's installation procedure is significantly ruggedized, and Calibre itself remains at http://box:8080 &mdash; where teachers can now add and delete E-Books, edit E-Book metadata, and convert E-Books to other formats like PDF and EPUB.  (IIAB's installer now creates the default Calibre usernames and passwords listed in http://FAQ.IIAB.IO so students can immediately explore E-Books that their teachers upload for them.)
* OpenStreetMap regional maps packs are now almost 10X smaller, offer far more local detail, are more up-to-date, and are easier to install &mdash; thanks to regularly published vector-based tilesets &mdash; instead of the older bitmap tiles:
  * 10 levels of zoom are included for the entire world, including ocean floors.
  * Search for and map 127,654 cities/settlements worldwide, if their population is larger than 1000.
  * Other regions can easily be installed from [OpenMapTiles.com](https://openmaptiles.com/downloads/planet/) if you want 14 levels of zoom, with overzoom to level 18+ (including building outlines in many cases!)  See ["How do I add zoomable maps for my region?"](http://FAQ.IIAB.IO#How_do_I_add_zoomable_maps_for_my_region.3F) in http://FAQ.IIAB.IO and our detailed [README](https://github.com/iiab/iiab-factory/blob/master/content/vector-tiles/README.md).
  * Online samples are viewable for the [San Francisco Bay Area](http://medbox.iiab.me/modules/en-osm-omt-min/) (includes this [109MB regional dataset](https://openmaptiles.com/downloads/north-america/us/california/san-francisco-bay/)) or choose [Central America & the Caribbean](http://medbox.iiab.me/modules/en-osm-omt-central-am/) (includes this [1.1-1.8 GB regional dataset](https://openmaptiles.com/downloads/central-america/)).  [#877](https://github.com/iiab/iiab/issues/877#issuecomment-405935272)
* BitTorrent tool ["Transmission"](https://github.com/iiab/iiab/tree/master/roles/transmission#transmission-readme) can download thousands of compressed KA Lite videos/thumbnails: just pick among 7 languages within [/etc/iiab/local_vars.yml](http://wiki.iiab.io/local_vars.yml) prior to installing, then watch your download(s) progress at http://box:9091 !  Also use Transmission to download any other torrentable Content Pack.  Instructions within http://FAQ.IIAB.IO at ["KA Lite Administration: What tips & tricks exist?"](http://wiki.laptop.org/go/IIAB/FAQ#KA_Lite_Administration:_What_tips_.26_tricks_exist.3F)  [#884](https://github.com/iiab/iiab/issues/884)
* PREVIEW: Easy backup, duplication and shrinking of Internet-in-a-Box (IIAB) microSD cards using [IMAGER](http://download.iiab.io/packages/imager/).  Allows teachers in the field to copy from any microSD to any other microSD that's big enough.  These are teachers who cannot realistically use Linux command-line tools to [truncate (AKA shrink, or minify)](https://github.com/iiab/iiab-factory/tree/master/box/rpi) and then [dd](https://www.linuxnix.com/what-you-should-know-about-linux-dd-command/).  Please see pre-release [screen shots](https://github.com/iiab/iiab-factory/blob/master/box/rpi/imager/docs/README.md).  Not yet landed but coming soon in IIAB 6.6 or 6.7:  [#827](https://github.com/iiab/iiab/issues/827)

### What's Upgraded?

* Internet-in-a-Box's [1-line installer](http://download.iiab.io/6.6/) for Raspbian Stretch, Ubuntu 18.04 LTS and Debian 9 is ruggedized and more efficient (and can quickly recover if Internet is interrupted during your IIAB installation).  Pick your favorite suite of Internet-in-a-Box apps the very moment you begin: whether you want ~6, ~12 or ~20 apps!  Implementers please read http://FAQ.IIAB.IO to get to know [/etc/iiab/local_vars.yml](http://wiki.iiab.io/local_vars.yml) — as well as the commands "[./iiab-install](https://github.com/iiab/iiab/blob/master/iiab-install)" and "[./runrole](https://github.com/iiab/iiab/blob/master/runrole)" within IIAB's main directory (/opt/iiab/iiab).
  * New, more convenient location for your IIAB installation settings: [/etc/iiab/local_vars.yml](http://wiki.laptop.org/go/IIAB/local_vars.yml).  Regional communities can now instantly re-use their favorite/custom IIAB configurations (much like IIAB microSD card cloning, also coming soon!)  It's as easy as taking the installation settings (`/etc/iiab/local_vars.yml`) from another machine, dropping that file into place on a fresh/new machine, and then starting your IIAB install!  How does this work?  With our 1-line installer: `curl download.iiab.io/6.6/install.txt | sudo bash`
  * Internet glitches?  Same instructions!  Simply RE-run `curl download.iiab.io/6.6/install.txt | sudo bash` thanks to IIAB's new unified installer!
  * Now with explanations in context as IIAB is installing, and major improvements in Ansible code readability (IIAB's [Ansible playbooks](https://github.com/iiab/iiab/tree/master/roles) are far more readable, with modern indentation, instead of cramming too many things into 1 line).  Our move to [Ansible 2.6](https://docs.ansible.com/ansible/2.6/porting_guides/porting_guide_2.6.html) helps future-proof Internet-in-a-Box configuration management.
  * OpenVPN remote support is beefed up: your openvpn_handle can now be pre-specified in [local_vars.yml](http://wiki.laptop.org/go/IIAB/local_vars.yml), before it's auto-saved to /etc/iiab/openvpn_handle.  Commands like `./install-support`, `iiab-remote-on` and `iiab-remote-off` help clarify, when implementers need live remote support.  [#995](https://github.com/iiab/iiab/issues/995), [PR #1000](https://github.com/iiab/iiab/pull/1000), [PR #1081](https://github.com/iiab/iiab/pull/1081), [PR #1090](https://github.com/iiab/iiab/pull/1090)
  * Experimental support for [Debian 10 "Buster"](https://www.debian.org/devel/debian-installer/) is included, in advance of Debian 10's release in 2019.  Daily builds of [Debian "Sid"](http://cdimage.debian.org/cdimage/daily-builds/sid_d-i/current/amd64/iso-cd/) (Debian's "unstable" bleeding-edge branch) may also work.
* Media-rich and searchable offline (ZIM) content thanks to an even far better and far more compact [Kiwix](http://www.kiwix.org/) engine 0.6.1 (2018-08-30) under the hood, with the "iiab-make-kiwix-lib" command now far more efficient (handles incremental additions and deletions of ZIM files).  _Watch out Google here we come :-)_  PR [#1089](https://github.com/iiab/iiab/pull/1089)
* [KA Lite](http://ka-lite.readthedocs.io/en/latest/installguide/release_notes.html) (LMS for Khan Academy videos & exercises) is upgraded to [0.17.5](https://github.com/learningequality/ka-lite/releases/tag/v0.17.5) with installation greatly streamlined, thanks to "Transmission" the content-downloading tool, described above.
* Wikipedia's own MediaWiki [1.31.0 LTS](https://www.mediawiki.org/wiki/MediaWiki_1.31) is now part of [BIG-sized](http://wiki.iiab.io/local_vars_big.yml) installs of IIAB, for doc collaboration.  You can also install and enable it from [local_vars.yml](http://wiki.iiab.io/local_vars.yml) (typically on Lines 143 and 144).
* Nextcloud is upgraded to [13.0.6](https://nextcloud.com/blog/more-stability-and-security-with-nextcloud-13.0.6-and-12.0.11/) ([changelog](https://nextcloud.com/changelog/#latest13)) based on [Nextcloud 13](https://nextcloud.com/blog/nextcloud-13-brings-secure-file-sync-and-collaboration-to-the-next-level/).
* WordPress is upgraded to [4.9.8](https://wordpress.org/news/2018/08/wordpress-4-9-8-maintenance-release/) including [“Try Gutenberg”](https://make.wordpress.org/core/2018/08/31/whats-new-in-gutenberg-31st-august/) visual/block editor preview.  Reinforces [GDPR](https://en.wikipedia.org/wiki/General_Data_Protection_Regulation) privacy compliance, based on WordPress [4.9](https://wordpress.org/news/2017/11/tipton/).
* Moodle is upgraded to [3.5.1+ LTS](https://docs.moodle.org/dev/Moodle_3.5.1_release_notes) based on [3.5 LTS](https://docs.moodle.org/dev/Moodle_3.5_release_notes) for privacy, better quizzes, speed, messaging integration and modern usability ([preview](https://www.moodlenews.com/2018/privacy-better-quizzes-faster-and-modern-the-latest-scoop-on-moodle-3-5/), [new features](https://docs.moodle.org/35/en/New_features)).
* Offline Social Network [Elgg](http://learn.elgg.org/en/2.3/) is upgraded to [2.3.8](https://github.com/Elgg/Elgg/blob/2.3.8/CHANGELOG.md).
* phpMyAdmin is upgraded to [4.8.3](https://www.phpmyadmin.net/news/).
* More comprehensive Offline Docs, onboard your Internet-in-a-Box and available to all in the field, at [http://box/info](http://box/info) &mdash; including instructions on [how to upgrade (or reinstall while offline) your IIAB server apps](http://FAQ.IIAB.IO#Can_I_upgrade_or_reinstall_server_apps.3F) a.k.a. IIAB services.
* Extensive Fixes.  See our [changelog](https://github.com/iiab/iiab/milestone/3?closed=1) of accomplishments!

### How do I try it?

TL;DR!  Try our 1-line installer for Raspberry Pi 3 (or 3 B+), Ubuntu 18.04 LTS or Debian 9:

     curl download.iiab.io/6.6/install.txt | sudo bash

On Raspberry Pi, you'll want the latest [Raspbian Stretch](https://www.raspberrypi.org/downloads/raspbian/) OS (2018-06-27 or higher) installed onto a microSD card large enough for all your content.  Installation usually completes within two hours, if your Internet speed is very fast.  An actual Ethernet cable greatly helps avoid Wi-Fi glitches!  See [download.iiab.io/6.6](http://download.iiab.io/6.6/) for speed and security tips to hit the ground running.

Finally if you're adventurous, try installing onto [another Linux](https://github.com/iiab/iiab/wiki/IIAB-Platforms), using our [Do Everything from Scratch](https://github.com/iiab/iiab/wiki/IIAB-Installation#do-everything-from-scratch) install instructions &mdash; getting you to the most important step &mdash; _where you can [add content!](https://github.com/iiab/iiab/wiki/IIAB-Installation#add-content)_

### Credits

Thank you e-v-e-r-y-o-n-e for building your own DIY Library of Alexandria.  To serve One & All.  Building on this software and designs contributed by [CONTRIBUTOR NAMES GO HERE] &mdash; among many others!

_Not just in your own community &mdash; but by keeping in touch with our global volunteer community network ([http://OFF.NETWORK](http://OFF.NETWORK)) each of you are providing the lifeblood "fieldback" &mdash; that keeps us motivated enabling Internet-in-a-Box's quality content collaborations across ALL communities!_

Join our Monday/Thursday calls if you too can help: [MINUTES.IIAB.IO](http://MINUTES.IIAB.IO)

Frequently Asked Questions: [FAQ.IIAB.IO](http://FAQ.IIAB.IO)

### Known Issues

* RACHEL's OER2GO catalog does not show sample modules and cannot be refreshed due to regression(s) on their server.  This should not stop you from downloading RACHEL/OER2GO modules using the built in (older) catalog however:  [#853](https://github.com/iiab/iiab/issues/853#issuecomment-412202168)
* [Ubuntu Server 18.04.1](https://www.ubuntu.com/download/server) may neglect to populate /etc/apt/sources.list since 2018-07-25, preventing sshpass and hence [Ansible](https://github.com/iiab/iiab/blob/master/scripts/ansible#L44-L89) from being installed.  Here is a [bug description and manual workaround](https://askubuntu.com/questions/1065093/different-sources-list-entries-between-18-04-server-and-18-04-1-server-isos), if you've already installed Ubuntu and fell in this trap.  Or install Ubuntu Server 18.04.1 using their 65MB netboot [mini.iso](http://archive.ubuntu.com/ubuntu/dists/bionic-updates/main/installer-amd64/current/images/netboot/mini.iso) installer, which does not have the bug!  Avoid their [812MB "live" installer](http://releases.ubuntu.com/18.04/ubuntu-18.04.1-live-server-amd64.iso).  It's not yet known if their [715MB installer](http://cdimage.ubuntu.com/releases/18.04.1/release/ubuntu-18.04.1-server-amd64.iso) is any better?
* Some short/memorizable URL's like http://box/kolibri do not yet work.  Use [http://box:8009](http://box:8009) in the interim:  [#923](https://github.com/iiab/iiab/issues/923)
* Raspberry Pi's internal Wi-Fi hotspot very occasionally fails to provide IP addresses, when Ethernet ISN'T plugged in? 
 [#989](https://github.com/iiab/iiab/issues/989)
* Raspberry Pi's internal Wi-Fi hotspot very occasionally fails within an hour of booting, when Ethernet IS plugged in?  [#926](https://github.com/iiab/iiab/issues/926)
* Calibre 3.29 (like 3.27.1, 3.24.x and 3.25) prevent IIAB microSD's from booting in Raspberry Pi Zero W.  Those who rely on RPi Zero W, please remember to turn off Calibre in /etc/iiab/local_vars.yml prior to installing of IIAB:  [#952](https://github.com/iiab/iiab/issues/952)
* USB memory sticks may need to be [removed and re-inserted](https://github.com/iiab/iiab/issues/329#issuecomment-333330362) into your Internet-in-a-Box before [Teacher Content](http://FAQ.IIAB.IO#Can_teachers_display_their_own_content.3F) appears at http://box/usb e.g. if stick was inserted just prior to a cold boot:  [#329](https://github.com/iiab/iiab/issues/329)
* Nextcloud ([http://box/nextcloud](http://box/nextcloud)) logins/logouts are much faster but remain slow:  [#401](https://github.com/iiab/iiab/issues/401)
* Set a default locale in your OS in /etc/default/locale (also the "locale" command and $LANG environment variable should show the same, e.g. "C.UTF-8" or "en_US.UTF-8") to avoid language restrictions upon re-installing WordPress.